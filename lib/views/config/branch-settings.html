<div class="general-config">
  <label class="checkbox">
    <input type="checkbox" ng-model="branch.active" data-test="active"> Active
  </label>
  <p class="help-text">选中该选项后，只能手动非active状态分支的触发编译和部署自动化过程.</p>

  <label class="checkbox">
    <input type="checkbox" ng-model="branch.daily_build"> Daily Build
  </label>
  <p class="help-text">选中该选项会自动进行每日构建.</p>

  <label class="checkbox">
    <input type="checkbox" ng-model="branch.deploy_on_green"> Deploy on Green
  </label>
  <p class="help-text">取消该选项后，自动触发的编译将不会进行自动部署</p>

  <label class="checkbox">
    <input type="checkbox" ng-model="branch.deploy_on_pull_request"> Deploy on Pull Request
  </label>
  <p class="help-text">取消该选项后，PR触发的编译将不会进行自动部署.</p>




  <div id="ssh-keys">
    <h3>SSH密钥</h3>
    <p>这里设置的密钥将会给需要使用密钥的插件使用。插件可能会自己使用不同的密钥。</p>
    <div class="row-fluid">
      <div class="span6">
        <h4>Private Key</h4>
        <textarea ng-model="branch.privkey"></textarea>
      </div>
      <div class="span6">
        <h4>Public Key</h4>
        <textarea ng-model="branch.pubkey"></textarea>
      </div>
    </div>

    <div class="row-fluid spaced-group">
      <div class="span3">
        <button ng-click="generateKeyPair()" class="btn">生成新的密钥</button>
      </div>
      <div class="span9">
        <label class="checkbox pull-right">
          <input ng-model="branch.envKeys" type="checkbox"> 将SSH Key暴露到环境变量中(STRIDER_SSH_PUB & STRIDER_SSH_PRIV)
        </label>
      </div>
    </div>

    <div class="row-fluid" ng-hide="branch.name === 'master'">
      <div class="span12">
        <h3>Reset Branch Configuration</h3>

        <p>
          This will reset all of the configuration for this branch to
          be exactly like the 'master' branch. You will have a chance to decline after
          selecting 'Mirror Master'.
        </p>

        <div class="spaced-group" ng-hide="branch.name === 'master'">
          <button class="btn btn-default"
            ng-if="!branch.mirror_master"
            ng-hide="branch.really_mirror_master"
            ng-click="branch.really_mirror_master = true">
            <span>
              Mirror Master
            </span>
          </button>

          <button class="btn btn-default"
            ng-show="branch.really_mirror_master"
            ng-click="branch.really_mirror_master = false">
            <span>
              Keep Customizations
            </span>
          </button>

          <button class="btn btn-danger"
            ng-show="branch.really_mirror_master"
            ng-click="mirrorMaster()">
            <span>
              Really Mirror Master
            </span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <button ng-click="saveGeneralBranch()" class="btn btn-primary pull-right">保存设置</button>
</div>
